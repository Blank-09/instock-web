import{r as P,i as _,a as j,h as o,F as C,j as e,A as G,T as x,c as i,B as f,G as W,l as u,m as l}from"./index-256c12e6.js";import{D as O,p as R}from"./DataGrid-cfdee9af.js";import{D as $,a as q,b as F,c as T}from"./DialogActions-88e13f3d.js";import"./index-2a69ed88.js";import"./Divider-47562e70.js";import"./Switch-ed00cdd6.js";var p={},z=_;Object.defineProperty(p,"__esModule",{value:!0});var y=p.default=void 0,B=z(P()),M=j,E=(0,B.default)((0,M.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"}),"Add");y=p.default=E;function H({id:a,image:d,name:s,category:m,price:n,stock:g}){return o(C,{children:[e(G,{alt:"alt",src:d,sx:{width:30,height:30},children:s[0].toUpperCase()}),e(x,{sx:{mx:3},variant:"subtitle2",children:s})]})}const J=[{field:"id",headerName:"ID",width:90,headerClassName:"bold-header",description:"id of the product"},{field:"product",headerName:"Product",width:300,headerClassName:"bold-header",description:"",renderCell:a=>(console.log("the cell data is : ",a.row.name),e(H,{...a.row}))},{field:"category",headerName:"Category",width:200,headerClassName:"bold-header",description:"category of the product"},{field:"price",headerName:"Price",width:150,description:"price of the product",headerClassName:"bold-header",valueGetter:a=>"â‚¹"+a.row.price},{field:"stock",headerName:"Stock",headerClassName:"bold-header",width:200,description:"how many items in the stock",valueGetter:a=>a.row.stock+" pcs"}];function L(){return e("div",{style:{height:"calc(100vh - 230px)",width:"100%",overflow:"auto"},children:e(O,{sx:{borderRadius:3,pl:3,"--unstable_DataGrid-headWeight":600},rows:R,columns:J,initialState:{pagination:{paginationModel:{page:0,pageSize:10}}},pageSizeOptions:[5,10,20]})})}const te=a=>{const[d,s]=i.useState(!1),m=()=>{s(!0)},n=()=>{s(!1)},[g,w]=i.useState(""),[b,I]=i.useState(""),[S,k]=i.useState(""),[N,D]=i.useState("");return e(f,{sx:{p:3},children:e(W,{item:!0,xs:9,sm:11,md:10,lg:11,children:o(f,{sx:{bgcolor:"white"},children:[e(x,{variant:"h5",sx:{fontWeight:"bold",mb:3},children:"Inventory"}),o(C,{children:[e(u,{variant:"contained",startIcon:e(y,{}),onClick:m,sx:{mb:2},children:"Add Item"}),o($,{open:d,onClose:n,children:[e(q,{children:"Add New Item"}),o(F,{children:[e(l,{autoFocus:!0,margin:"dense",label:"Product",fullWidth:!0,onChange:t=>w(t.target.value)}),e(l,{margin:"dense",label:"Category",fullWidth:!0,onChange:t=>I(t.target.value)}),e(l,{margin:"dense",label:"Price",fullWidth:!0,onChange:t=>k(t.target.value)}),e(l,{margin:"dense",label:"Stock",fullWidth:!0,onChange:t=>D(t.target.value)})]}),o(T,{children:[e(u,{onClick:n,children:"Cancel"}),e(u,{onClick:async()=>{const t=localStorage.Credentials,c=JSON.parse(t);console.log(c.email);const r=(await axios.get(`/users?email=${c.email}`)).data[0];console.log(r);const h={product:g,category:b,price:S,stock:N};console.log(h),r.Inventory?r.Inventory.push(h):r.Inventory=[h];try{const v=await axios.get(`http://localhost:3001/users?email=${c.email}`),A=await axios.patch(`http://localhost:3001/users/${r.id}`,{Inventory:r.Inventory});console.log(A.data)}catch(v){console.error(v)}n()},children:"Add"})]})]})]}),e(L,{})]})})})};export{te as default};
